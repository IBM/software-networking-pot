"use strict";(self.webpackChunksn_pot=self.webpackChunksn_pot||[]).push([[9938],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(a),k=i,u=m["".concat(p,".").concat(k)]||m[k]||d[k]||r;return a?n.createElement(u,o(o({ref:t},c),{},{components:a})):n.createElement(u,o({ref:t},c))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=k;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},35036:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(87462),i=(a(67294),a(3905));const r={sidebar_position:13},o="Predictive Alerting",l={unversionedId:"IBM SevOne Automated Network Observability/RNA Labs/predictive",id:"IBM SevOne Automated Network Observability/RNA Labs/predictive",title:"Predictive Alerting",description:"Overview",source:"@site/docs/IBM SevOne Automated Network Observability/RNA Labs/predictive.md",sourceDirName:"IBM SevOne Automated Network Observability/RNA Labs",slug:"/IBM SevOne Automated Network Observability/RNA Labs/predictive",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/predictive",draft:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"tutorialSidebar",previous:{title:"Kubernetes Container Monitoring",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/di_ebpf"},next:{title:"Custom Device Grouping",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/rna_grouping"}},p={},s=[{value:"Overview",id:"overview",level:2},{value:"Predict Short Term Future Behaviour",id:"predict-short-term-future-behaviour",level:2},{value:"Create API Call",id:"create-api-call",level:2},{value:"Review",id:"review",level:2}],c={toc:s},m="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(m,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"predictive-alerting"},"Predictive Alerting"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"In this lab we will review how we can create proactive alerts based on anomaly detection and predictive behaviour."),(0,i.kt)("p",null,"One of the ways to become predictive is to monitor what will happen in the future if a metric keeps behaving in a specific way. Lots of tools can do capacity forecast, however this is something that they do once a day and considering long periods of historical data, but what happens when the metric starts behaving abnormally only for the last 30 minutes? "),(0,i.kt)("p",null,"SevOne can generate notifications when an anomaly is detected on a metric, however that doesn't mean for sure that there is a potential future issue. But what we can do is, once we have detected an anomaly, trigger an action to check how the future utilization of that metric will be (say in the next 24 hours) to ",(0,i.kt)("strong",{parentName:"p"},"predict")," if that's a potential future issue or not."),(0,i.kt)("p",null,"This is what we are doing in this lab:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"First, we are generating an alert when we detect an anomaly on one of the metrics"),(0,i.kt)("li",{parentName:"ul"},"Second, we check how the future behaviour of this metric"),(0,i.kt)("li",{parentName:"ul"},"Third, if the future behaviour of the metric goes over 100% utilization, then we trigger a new alert (Emergency alert) notifying that this is a real issue")),(0,i.kt)("p",null,"Therefore, what we are doing here is predictively detecting potential future issues based on short term historical data abnormalities."),(0,i.kt)("h2",{id:"predict-short-term-future-behaviour"},"Predict Short Term Future Behaviour"),(0,i.kt)("p",null,"If SevOne authentication has already been created, please skip this block of actions and continue to step 4."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Log into SANO automation platform")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Go to Authentications")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click  Create Authentication"),(0,i.kt)("p",{parentName:"li"},"a. Name: SevOne"),(0,i.kt)("p",{parentName:"li"},"b. Service: SevOne"),(0,i.kt)("p",{parentName:"li"},"c. ",(0,i.kt)("strong",{parentName:"p"},"Protocol: http://")," (<-- important)"),(0,i.kt)("p",{parentName:"li"},"d. Host: 10.0.0.10"),(0,i.kt)("p",{parentName:"li"},"e. Username: admin"),(0,i.kt)("p",{parentName:"li"},"f. Password: SevOne"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(47315).Z,width:"579",height:"758"})),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Go to ",(0,i.kt)("strong",{parentName:"li"},"Workflows"))),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Workflow"),(0,i.kt)("p",{parentName:"li"},"a. Name: Your Name - Predictive Alerting"),(0,i.kt)("p",{parentName:"li"},"b. Layout type: Sequence"))),(0,i.kt)("ol",{start:6},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add variables to Start"),(0,i.kt)("p",{parentName:"li"},"a. NMSCredentials"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: NMSCredentials\n\nii. Type: Authentication -> SevOne\n\niii. Default Value: "admin/SevOne"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"b. deviceid"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: deviceid\n\nii. Type: Number\n\niii. Default Value: 1\n\niv. In\n\nv. Required\n")),(0,i.kt)("p",{parentName:"li"},"c. objectid"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: objectid\n\nii. Type: Number\n\niii. Default Value: 1\n\niv. In\n\nv. Required\n")),(0,i.kt)("p",{parentName:"li"},"d. indicatorname"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: indicatorname\n\nii. Type: String\n\niii. Default Value: availability\n\niv. In\n\nv. Required\n")),(0,i.kt)("p",{parentName:"li"},"e. seconds"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: seconds\n\nii. Type: Number\n\niii. Default Value: 21600\n\niv. In\n")),(0,i.kt)("p",{parentName:"li"},"f. fvalue"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: fvalue\n\nii. Type: Number\n\niii. Default Value: 0\n")),(0,i.kt)("p",{parentName:"li"},"g. backtime"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: backtime\n\nii. Type: String\n\niii. Default Value: "Past 60 minutes"\n\niv. In\n')),(0,i.kt)("p",{parentName:"li"},"h. severity"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: severity\n\nii. Type: Number\n\niii. Default Value: 0\n\niv. In\n")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(72800).Z,width:"986",height:"687"})),(0,i.kt)("ol",{start:7},(0,i.kt)("li",{parentName:"ol"},"Change to Flow View")),(0,i.kt)("ol",{start:8},(0,i.kt)("li",{parentName:"ol"},"On the left hand side panel, search for SevOne, Click on SevOne -> REST v3 -> Data")),(0,i.kt)("ol",{start:9},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Select "Data Performance Metrics" and drop it after the building block START'),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Forecast"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. authKey: $NMSCredentials\n\nii. body:\n\n    1. indicatorFilters -> Append Child\n\n        a. IndicatorTypeNames -> Append Child\n\n            i. value: $indicatorname\n\n        b. objectIds: [ $objectid ]\n\n    2. preferPercent: TRUE\n\n    3. timeRange -> timeString: $backtime\n\n    4. trendingOptions:\n\n        a. projectedTime: $seconds\n\n        b. timeRange:\n\n            i. label: $backtime\n\n            ii. timeString: $backtime\n\n        c. trendType: PROJECTED\n\n    \n")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(65592).Z,width:"1523",height:"727"})),(0,i.kt)("p",null,"If you click on the 'square' icon next to body, you should see something like the above."),(0,i.kt)("ol",{start:10},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> Assign"),(0,i.kt)("p",{parentName:"li"},"a. Change name to Future_Value"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. variable: $fvalue\n\nii. value: $SevOne_Forecast.result.indicatorResults[0].polledData.trendValueA + ($seconds * $SevOne_Forecast.result.indicatorResults[0].polledData.trendValueB)\n")))),(0,i.kt)("ol",{start:11},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> DateTime -> TimestampNowms"),(0,i.kt)("p",{parentName:"li"},"a. No need to edit anything"))),(0,i.kt)("ol",{start:12},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> If"),(0,i.kt)("p",{parentName:"li"},"a. Change name to If_future_value_more_than_100"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. condition: $fvalue >= 100\n")))),(0,i.kt)("ol",{start:13},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"On the TRUE branch of the IF, add a new building block, SevOne -> REST API v2 -> Alerts -> createAlert"),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Create_Alert"),(0,i.kt)("p",{parentName:"li"},"a. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. authKey: $NMSCredentials\n\nii. alert:\n\n    1. deviceId: $deviceid\n\n    2. endTime: $TimestampNowms_1.result\n\n    3. indicatorName: "$indicatorname"\n\n    4. message: "There is an anomaly on this device on indicator " + $indicatorname + " that might reach 100% in the next 24 hours"\n\n    5. objectId: $objectid\n\n    6. origin: system\n\n    7. severity: $severity\n\n    8. startTime: $TimestampNowms_1.result\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(70893).Z,width:"1193",height:"641"})),(0,i.kt)("ol",{start:14},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If there is an Assign building block at the end of the workflow, use that building block for the next config, if there is not, add a building block from Common -> Assign"),(0,i.kt)("p",{parentName:"li"},"a. variable: $result"),(0,i.kt)("p",{parentName:"li"},"b. value: $fvalue"))),(0,i.kt)("h2",{id:"create-api-call"},"Create API Call"),(0,i.kt)("ol",{start:15},(0,i.kt)("li",{parentName:"ol"},"Go to APIS")),(0,i.kt)("ol",{start:16},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on \u2018Create API\u2019"),(0,i.kt)("p",{parentName:"li"},"a. Name: predictive"),(0,i.kt)("p",{parentName:"li"},"b. Authentications"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Authentication: API Keys\n\n    1. Click \u2018Add API Key\u2019\n\n    2. Name: hfpkey\n\nii. Copy the api key for later use\n")),(0,i.kt)("p",{parentName:"li"},"c. Click \u2018Create\u2019"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(26468).Z,width:"961",height:"748"})),(0,i.kt)("ol",{start:17},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In workflow deployments, click \u2018Create\u2019"),(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Workflow -> Choose the workflow you created clicking on the folder icon on the top right side of that field")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Stage - > Click on + icon -> leave everything as it is, click \u2018Save\u2019")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Endpoint -> Click on + icon "),(0,i.kt)("p",{parentName:"li"},"a. Change Path to /Predictive"),(0,i.kt)("p",{parentName:"li"},"b. Method: POST"),(0,i.kt)("p",{parentName:"li"},"c. Click \u2018Save\u2019"))))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(43669).Z,width:"1896",height:"771"})),(0,i.kt)("ol",{start:18},(0,i.kt)("li",{parentName:"ol"},"Click Deploy")),(0,i.kt)("h2",{id:"review"},"Review"),(0,i.kt)("ol",{start:19},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on Swagger UI"),(0,i.kt)("p",{parentName:"li"},"a. Click on Authorize"),(0,i.kt)("p",{parentName:"li"},"b. Paste the copied toekn (step 15.b.ii)"),(0,i.kt)("p",{parentName:"li"},"c. Click Authorize"),(0,i.kt)("p",{parentName:"li"},"d. Click Close"))),(0,i.kt)("ol",{start:20},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Try it out"),(0,i.kt)("p",{parentName:"li"},"a. Edit the body:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. NMSCredentials: "admin/SevOne"\n\nii. deviceid: 1\n\niii. objectid: 1\n\niv. indicatorname: "availability"\n\nv. seconds: 21600\n\nvi. backtime: "Past 60 minutes"\n\nvii. severity: 0 \n')),(0,i.kt)("p",{parentName:"li"},"b. Click Execute"))),(0,i.kt)("ol",{start:21},(0,i.kt)("li",{parentName:"ol"},"Copy the Request URL")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(60345).Z,width:"1543",height:"895"})),(0,i.kt)("ol",{start:22},(0,i.kt)("li",{parentName:"ol"},"Go to SevOne NMS")),(0,i.kt)("ol",{start:23},(0,i.kt)("li",{parentName:"ol"},"Go to Events -> Configuration -> Webhook Definition Manager")),(0,i.kt)("ol",{start:24},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on Add Webhook Definition"),(0,i.kt)("p",{parentName:"li"},"a. Webhook Definition Name: IRNA Predictive"),(0,i.kt)("p",{parentName:"li"},"b. Destination URL: paste the Request URL copied on step 21"),(0,i.kt)("p",{parentName:"li"},"c. Request Method: POST"),(0,i.kt)("p",{parentName:"li"},"d. Body:"))),(0,i.kt)("p",null,"(Copy everything, including the brakets, but without the quotes)"),(0,i.kt)("p",null,'"'),(0,i.kt)("p",null,"{"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'"NMSCredentials": "admin/SevOne",\n\n"deviceid": $deviceId,\n\n"objectid": $objectId,\n\n"indicatorname": "ifHCInOctets",\n\n"seconds": 21600,\n\n"backtime": "Past 60 minutes",\n\n"severity": 0 \n')),(0,i.kt)("p",null,"}"),(0,i.kt)("p",null,'"'),(0,i.kt)("ol",{start:25},(0,i.kt)("li",{parentName:"ol"},"Click Save")),(0,i.kt)("ol",{start:26},(0,i.kt)("li",{parentName:"ol"},"Go to Events -> Configuration -> Policy Browser")),(0,i.kt)("ol",{start:27},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Policy"),(0,i.kt)("p",{parentName:"li"},"a. Name: Unusual high traffic"),(0,i.kt)("p",{parentName:"li"},"b. Device group: All device groups"),(0,i.kt)("p",{parentName:"li"},"c. Object Type: Interface"),(0,i.kt)("p",{parentName:"li"},"d. Severity: Notice"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(88673).Z,width:"1573",height:"535"})),(0,i.kt)("ol",{start:28},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on Trigger Conditions"),(0,i.kt)("p",{parentName:"li"},"a. Click on the menu item under Conditions -> Create New"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Indicator: HC In Octets\n\nii. Type: Baseline Percentage\n\niii. Comparison: greater than\n\niv. Threshold: 130 percent of baseline\n\nv. Duration: 15 minutes\n\nvi. Aggregation: Average\n")),(0,i.kt)("p",{parentName:"li"},"b. Override Webhook per Alert: Enabled"),(0,i.kt)("p",{parentName:"li"},"c. One Webhook per Alert: disabled"),(0,i.kt)("p",{parentName:"li"},"d. Select the IRNA Predictive webhook and move it to the right side")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click 'Save as New'"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(49641).Z,width:"892",height:"619"})))}d.isMDXComponent=!0},47315:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img1-ee5e510d0e0ff3ba9618fef58df14677.png"},72800:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img2-dba989e5cc99fb80e5df50f68ff46ee3.png"},65592:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img3-13691b5b1b89fea1803ccf1f1a914039.png"},70893:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img4-9c6a1872e109644a3478d5855ee23178.png"},26468:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img5-3a337d9fb8926d268a36b90474b0601e.png"},43669:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img6-5de165bf1cee0b28866027866bb24ae0.png"},60345:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img7-ceac90589d9f55e49bc9f74902127d61.png"},88673:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img8-05f5fc186b2be0f03bf774889ef3b3cc.png"},49641:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img9-46c9b1f178da85dc026dcc8fa4bd265e.png"}}]);