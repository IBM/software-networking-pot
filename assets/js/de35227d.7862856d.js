"use strict";(self.webpackChunksn_pot=self.webpackChunksn_pot||[]).push([[2274],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>u});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(a),k=i,u=m["".concat(p,".").concat(k)]||m[k]||d[k]||r;return a?n.createElement(u,o(o({ref:t},c),{},{components:a})):n.createElement(u,o({ref:t},c))}));function u(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=k;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},1791:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(7462),i=(a(7294),a(3905));const r={sidebar_position:4},o="Integrate SevOne Metadata into ServiceNow attributes",l={unversionedId:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/attributesnow",id:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/attributesnow",title:"Integrate SevOne Metadata into ServiceNow attributes",description:"Overview",source:"@site/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/attributesnow.md",sourceDirName:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration",slug:"/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/attributesnow",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/attributesnow",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Integrate ServiceNow CI properties into SevOne",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/metadatasevone"},next:{title:"IBM Rapid Network Automation Primer",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/irna-primer"}},p={},s=[{value:"Overview",id:"overview",level:2},{value:"Prerequirements",id:"prerequirements",level:2},{value:"Prepare the System",id:"prepare-the-system",level:2},{value:"SevOne - ServiceNow attribute sync",id:"sevone---servicenow-attribute-sync",level:2},{value:"Review",id:"review",level:2}],c={toc:s},m="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(m,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"integrate-sevone-metadata-into-servicenow-attributes"},"Integrate SevOne Metadata into ServiceNow attributes"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"In this lab we will review how we can copy SevOne Metadata into ServiceNow."),(0,i.kt)("p",null,"The flow of this lab is the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Firstly we will create the new attributes in ServiceNow")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"We will get the list of devices in SevOne")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For each of the devices, we will check if the device exists in ServiceNow")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the device exists, we will get the values of the metadata attributes that we want to send to ServiceNow")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"We will update the ServiceNow CI with the values"))),(0,i.kt)("h2",{id:"prerequirements"},"Prerequirements"),(0,i.kt)("p",null,"In order to complete this lab, it is required to have access to a ServiceNow instance. If you don't have one already, please create one using following the steps defined on this ",(0,i.kt)("a",{parentName:"p",href:"https://developer.servicenow.com/dev.do#!/learn/learning-plans/utah/new_to_servicenow/app_store_learnv2_buildmyfirstapp_utah_personal_developer_instances"},"link"),"."),(0,i.kt)("p",null,"It's important to change your role to admin to be able to use the instance properly (see link ",(0,i.kt)("a",{parentName:"p",href:"https://www.servicenow.com/community/user/ssoregistrationpage?dest_url=https:%2F%2Fwww.servicenow.com%2Fcommunity%2Finstance-help-forum%2Fhow-to-get-out-of-app-engine-studio-and-go-back-to-the-main%2Fm-p%2F286367%2Fthread-id%2F23136"},"here")," )"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"We strongly recommend doing the 'Sync Sevone Devices with ServiceNow' lab first to have the same devices in both platforms")),(0,i.kt)("h2",{id:"prepare-the-system"},"Prepare the System"),(0,i.kt)("p",null,"As we will copy some custom metadata into ServiceNow, firstly we need to prepare ServiceNow to support the new attributes."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to your ServiceNow instance"),(0,i.kt)("p",{parentName:"li"},"a. Click on All"),(0,i.kt)("p",{parentName:"li"},"b. Search for dictionary, and click on Dictionary"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(8519).Z,width:"603",height:"293"})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"c. Click on New (top right corner)\n\n    i. Table: IP Device\n\n    ii. Type: String\n\n    iii. Column label: Contact\n\n    iv. Column name: u_contact\n\n    v. Max length: 256\n\n    vi. Click Submit\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(8991).Z,width:"742",height:"337"})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"d. Click on New (top right corner)\n\n    i. Table: IP Device\n\n    ii. Type: Integer\n\n    iii. Column label: SevOne_ID\n\n    iv. Column name: u_sevone_id\n\n    v. Max length: 16\n\n    vi. Click Submit\n")),(0,i.kt)("h2",{id:"sevone---servicenow-attribute-sync"},"SevOne - ServiceNow attribute sync"),(0,i.kt)("p",null,"If SevOne authentication has already been created, please skip this block of actions and continue to step 5."),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Log into SANO automation platform")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to Authentications")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click  Create Authentication"),(0,i.kt)("p",{parentName:"li"},"a. Name: SevOne"),(0,i.kt)("p",{parentName:"li"},"b. Service: SevOne"),(0,i.kt)("p",{parentName:"li"},"c. ",(0,i.kt)("strong",{parentName:"p"},"Protocol: http://")," (<-- important)"),(0,i.kt)("p",{parentName:"li"},"d. Host: 10.0.0.10"),(0,i.kt)("p",{parentName:"li"},"e. Username: admin"),(0,i.kt)("p",{parentName:"li"},"f. Password: SevOne"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(1059).Z,width:"579",height:"758"})),(0,i.kt)("p",null,"If ServiceNow authentication has already been created, please skip this block of actions and continue to step 6."),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Authentication"),(0,i.kt)("p",{parentName:"li"},"a. Name: ServiceNow"),(0,i.kt)("p",{parentName:"li"},"b. Service: ServiceNow"),(0,i.kt)("p",{parentName:"li"},"c. Protocol: https://"),(0,i.kt)("p",{parentName:"li"},"d. Host: (Your SNOW instance URL, example: dev109667.service-now.com)"),(0,i.kt)("p",{parentName:"li"},"e. Username: (Your SNOW instance username, example: admin)"),(0,i.kt)("p",{parentName:"li"},"f. Password: (Your SNOW instance password)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to ",(0,i.kt)("strong",{parentName:"p"},"Workflows"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Workflow"),(0,i.kt)("p",{parentName:"li"},"a. Name: Sync SevOne metadata with ServiceNOW attributes"),(0,i.kt)("p",{parentName:"li"},"b. Layout type: Sequence"))),(0,i.kt)("ol",{start:8},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add variables to Start"),(0,i.kt)("p",{parentName:"li"},"a. NMSCredentials"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: NMSCredentials\n\nii. Type: Authentication -> SevOne\n\niii. Default Value: "admin/SevOne"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"b. ServiceNowCredentials"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: ServiceNowCredentials\n\nii. Type: Authentication -> ServiceNow\n\niii. Default Value: "admin/ServiceNow"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"c. namespace"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: namespace\n\nii. Type: string\n\niii. Default Value: "ServiceNow"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"d. attribute"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: attribute\n\nii. Type: string\n\niii. Default Value: "sysContact"\n\niv. In\n\nv. Required\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(2128).Z,width:"993",height:"419"})),(0,i.kt)("ol",{start:9},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Change to Flow View")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"On the left hand side panel, Click on SevOne -> REST v3 -> Metadata")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Select "Metadata Devices (POST)" and drop it after the building block START'),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Get_Devices"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. authKey: $NMSCredentials\n")))),(0,i.kt)("ol",{start:12},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> ForEach"),(0,i.kt)("p",{parentName:"li"},"a. Change name to ForEach_Device"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. list: $SevOne_Get_Devices.result.devices\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Inside the LOOP, add a new building block, ServiceNow -> getTable"),(0,i.kt)("p",{parentName:"li"},"a. Change name to ServiceNow_Find_CI"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. authKey: $ServiceNowCredentials\n\nii. tableName: "cmdb_ci_ip_device"\n\niii. query: "name=" + $ForEach_Device.item.name\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(3491).Z,width:"1488",height:"523"})),(0,i.kt)("ol",{start:14},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> If"),(0,i.kt)("p",{parentName:"li"},"a. Change name to If_CI_Found"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. condition: $ServiceNow_Find_CI.result.result.length > 0\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In the 'TRUE' branch of the If, add a new building block, SevOne -> REST v3 -> Metadata -> Metadata Metadata Values (POST)"),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Find_Metadata_Value"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. authKey: $NMSCredentials\n\nii. body:\n\n    1. attributeName:\n\n        a. attribute: $attribute\n\n        b. namespace: $namespace\n\n    2. entityId: $ForEach_Device.item.id\n\n    3. entityType: DEVICE\n")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(7874).Z,width:"1320",height:"576"})),(0,i.kt)("ol",{start:16},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, ServiceNow -> patchTable"),(0,i.kt)("p",{parentName:"li"},"a. Change name to ServiceNow_Update_Attribute"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. authKey: $ServiceNowCredentials\n\nii. tableName: "cmdb_ci_ip_device"\n\niii. sys_id: $ServiceNow_Find_CI.result.result[0].sys_id\n\niv. Table: click on the pencil item and paste the following content\n\n    {\n        "u_contact": $SevOne_Find_Metadata_Value.result.values[0],\n        "u_sevone_id": $ForEach_Device.item.id\n    }\n\nv. content_type: "application/json"\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(1953).Z,width:"1297",height:"688"})),(0,i.kt)("h2",{id:"review"},"Review"),(0,i.kt)("ol",{start:17},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"To test the workflow, click on Run (it will take around 1 minute to complete)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to your ServiceNow instance"),(0,i.kt)("p",{parentName:"li"},"i. Click on All"),(0,i.kt)("p",{parentName:"li"},"ii. Search for CMDB"),(0,i.kt)("p",{parentName:"li"},"iii. Click on CMDB workspace (inside the CMDB workspace group)"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(9170).Z,width:"441",height:"344"})),(0,i.kt)("ol",{start:19},(0,i.kt)("li",{parentName:"ol"},"Scroll down where CI overview is, and click on the 'Devices' column")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(5165).Z,width:"1360",height:"431"})),(0,i.kt)("ol",{start:20},(0,i.kt)("li",{parentName:"ol"},"Click on IP Device")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(4388).Z,width:"1426",height:"952"})),(0,i.kt)("ol",{start:21},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on any device, for example CHI-AP01"),(0,i.kt)("p",{parentName:"li"},"a. Navigate to the Details section (bottom half)"),(0,i.kt)("p",{parentName:"li"},"b. Click on the three dots next to Key Attributes"),(0,i.kt)("p",{parentName:"li"},"c. Click Show XML"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(1938).Z,width:"896",height:"936"})),(0,i.kt)("ol",{start:22},(0,i.kt)("li",{parentName:"ol"},"At the bottom of the XML file you should see the new fields populated, u_contact and u_sevone_id")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:a(9746).Z,width:"704",height:"574"})),(0,i.kt)("p",null,"NOTE: the reason why these new fields don't appear directly on the web interface is because we haven't edited the out-of-the-box form in ServiceNow to display those new attributes."))}d.isMDXComponent=!0},1059:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img1-ee5e510d0e0ff3ba9618fef58df14677.png"},9170:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img4-f80a1986a624aeb9479c3bce55d4440b.png"},5165:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img5-e48008194990cc48c283cd13c11592a6.png"},4388:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/img6-a9f1c87676c50cc9052f119e53a52f3f.png"},8519:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img1-bb9e62b340b811541c860bf552eae0f1.png"},8991:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img2-c78f100eb124db46acc4a726f733786a.png"},2128:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img3-441cc2ce1142476a1f34ff4625e66b80.png"},3491:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img4-e680f9e1a1229c131d9294c2908ba0a8.png"},7874:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img5-60a4624c65929c59517d3b4b90d12756.png"},1953:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img6-56cd7f47749616dca303f354d150c5cf.png"},1938:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img7-a143e7f8ff1f52010cd090a26208107f.png"},9746:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Img8-3acf95c2acbb8291fcd7e808c9e94261.png"}}]);