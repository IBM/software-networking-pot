"use strict";(self.webpackChunksn_pot=self.webpackChunksn_pot||[]).push([[6171],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>v});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=s(n),k=i,v=m["".concat(p,".").concat(k)]||m[k]||d[k]||r;return n?a.createElement(v,o(o({ref:t},c),{},{components:n})):a.createElement(v,o({ref:t},c))}));function v(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=k;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},1915:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:2},o="Sync ServiceNow CIs with SevOne",l={unversionedId:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/servicenowsevone",id:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/servicenowsevone",title:"Sync ServiceNow CIs with SevOne",description:"Overview",source:"@site/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/servicenowsevone.md",sourceDirName:"IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration",slug:"/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/servicenowsevone",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/servicenowsevone",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Sync SevOne Devices with ServiceNow",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/sevoneservicenow"},next:{title:"Integrate ServiceNow CI properties into SevOne",permalink:"/software-networking-pot/docs/IBM SevOne Automated Network Observability/RNA Labs/CMDB Integration/metadatasevone"}},p={},s=[{value:"Overview",id:"overview",level:2},{value:"Prerequirements",id:"prerequirements",level:2},{value:"Prepare the System",id:"prepare-the-system",level:2},{value:"ServiceNow - SevOne CI sync",id:"servicenow---sevone-ci-sync",level:2},{value:"Review",id:"review",level:2}],c={toc:s},m="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(m,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"sync-servicenow-cis-with-sevone"},"Sync ServiceNow CIs with SevOne"),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"In this lab we will review how we can make sure that all the CIs with the monitor flag on in ServiceNow are monitored in SevOne."),(0,i.kt)("p",null,"The flow of this lab is the following:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"We get the list of current CIs in a list of CI tables in ServiceNow that have the monitor field enabled")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"For each of these CIs, we will get the name and try to find if there a device with the same name in SevOne")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the device already exists in SevOne, no further actions will be taken")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"If the device is not found in SevOne a new device will be added in SevOne with the name and ipaddress fromr ServiceNow"))),(0,i.kt)("h2",{id:"prerequirements"},"Prerequirements"),(0,i.kt)("p",null,"In order to complete this lab, it is required to have access to a ServiceNow instance. If you don't have one already, please create one using following the steps defined on this ",(0,i.kt)("a",{parentName:"p",href:"https://developer.servicenow.com/dev.do#!/learn/learning-plans/utah/new_to_servicenow/app_store_learnv2_buildmyfirstapp_utah_personal_developer_instances"},"link"),"."),(0,i.kt)("p",null,"It's important to change your role to admin to be able to use the instance properly (see link ",(0,i.kt)("a",{parentName:"p",href:"https://www.servicenow.com/community/user/ssoregistrationpage?dest_url=https:%2F%2Fwww.servicenow.com%2Fcommunity%2Finstance-help-forum%2Fhow-to-get-out-of-app-engine-studio-and-go-back-to-the-main%2Fm-p%2F286367%2Fthread-id%2F23136"},"here")," )"),(0,i.kt)("h2",{id:"prepare-the-system"},"Prepare the System"),(0,i.kt)("p",null,"On the Developer Instances in ServiceNow, all CIs come with the monitor flag off and without IP address. Therefore we will manually configure a couple of CIs with an IP address and enable the monitor flag before we create this workflow, otherwise there wouldn't be any CI to integrate in SevOne."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to your ServiceNow instance"),(0,i.kt)("p",{parentName:"li"},"i. Click on All"),(0,i.kt)("p",{parentName:"li"},"ii. Search for CMDB"),(0,i.kt)("p",{parentName:"li"},"iii. Click on CMDB workspace (inside the CMDB workspace group)"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(962).Z,width:"441",height:"344"})),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Scroll down where CI overview is, and click on the 'Servers' column")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(6988).Z,width:"1859",height:"774"})),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on Windows Servers"),(0,i.kt)("p",{parentName:"li"},"i. Click on one of the servers, for example on OWA-SD-01"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(9478).Z,width:"1433",height:"627"})),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"ii. Scroll down until you find the IP Address section, and add an IP address, for example 10.10.10.1\n\niii. Keep scrolling down and enable the Monitor field\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(6649).Z,width:"882",height:"817"})),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Do the same for another server, for example PS LoadBal01, with a different IP address, for example 10.10.10.2 (and remember to enable the monitor flag)")),(0,i.kt)("h2",{id:"servicenow---sevone-ci-sync"},"ServiceNow - SevOne CI sync"),(0,i.kt)("p",null,"If SevOne authentication has already been created, please skip this block of actions and continue to step 8."),(0,i.kt)("ol",{start:5},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Log into SANO automation platform")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to Authentications")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click  Create Authentication"),(0,i.kt)("p",{parentName:"li"},"a. Name: SevOne"),(0,i.kt)("p",{parentName:"li"},"b. Service: SevOne"),(0,i.kt)("p",{parentName:"li"},"c. ",(0,i.kt)("strong",{parentName:"p"},"Protocol: http://")," (<-- important)"),(0,i.kt)("p",{parentName:"li"},"d. Host: 10.0.0.10"),(0,i.kt)("p",{parentName:"li"},"e. Username: admin"),(0,i.kt)("p",{parentName:"li"},"f. Password: SevOne"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(8737).Z,width:"579",height:"758"})),(0,i.kt)("p",null,"If ServiceNow authentication has already been created, please skip this block of actions and continue to step 9."),(0,i.kt)("ol",{start:8},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Authentication"),(0,i.kt)("p",{parentName:"li"},"a. Name: ServiceNow"),(0,i.kt)("p",{parentName:"li"},"b. Service: ServiceNow"),(0,i.kt)("p",{parentName:"li"},"c. Protocol: https://"),(0,i.kt)("p",{parentName:"li"},"d. Host: (Your SNOW instance URL, example: dev109667.service-now.com)"),(0,i.kt)("p",{parentName:"li"},"e. Username: (Your SNOW instance username, example: admin)"),(0,i.kt)("p",{parentName:"li"},"f. Password: (Your SNOW instance password)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to ",(0,i.kt)("strong",{parentName:"p"},"Workflows"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click Create Workflow"),(0,i.kt)("p",{parentName:"li"},"a. Name: Sync ServiceNOW CIs with SevOne"),(0,i.kt)("p",{parentName:"li"},"b. Layout type: Sequence"))),(0,i.kt)("ol",{start:11},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add variables to Start"),(0,i.kt)("p",{parentName:"li"},"a. NMSCredentials"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: NMSCredentials\n\nii. Type: Authentication -> SevOne\n\niii. Default Value: "admin/SevOne"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"b. ServiceNowCredentials"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. Name: ServiceNowCredentials\n\nii. Type: Authentication -> ServiceNow\n\niii. Default Value: "admin/ServiceNow"\n\niv. In\n\nv. Required\n')),(0,i.kt)("p",{parentName:"li"},"c. tables"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. Name: tables\n\nii. Type: array\n\niii. Default Value: ['cmdb_ci_server','cmdb_ci_ip_device']\n\niv. In\n\nv. Required\n")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(8529).Z,width:"997",height:"435"})),(0,i.kt)("ol",{start:12},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Change to Flow View")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"On the left hand side panel, Click on Common")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},'Select "ForEach" and drop it after the building block START'),(0,i.kt)("p",{parentName:"li"},"a. Change name to ForEach_Table"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. list: $tables\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Inside the LOOP, add a new building block, ServiceNow -> getTable"),(0,i.kt)("p",{parentName:"li"},"a. Change name to ServiceNow_CIs"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. authKey: $ServiceNowCredentials\n\nii. tableName: $ForEach_Table.item\n\niii. query: "monitor=true"\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(3169).Z,width:"1490",height:"518"})),(0,i.kt)("ol",{start:16},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> ForEach"),(0,i.kt)("p",{parentName:"li"},"a. Change name to ForEach_CI"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. list: $ServiceNow_CIs.result.result\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Inside the LOOP, add a new building block, SevOne-> REST v3 -> Metadata"),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Get_Device"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. authKey: $NMSCredentials\n\nii. body -> name -> value : $ForEach_CI.item.name\n")))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(8972).Z,width:"1481",height:"527"})),(0,i.kt)("ol",{start:18},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Add a new building block, Common -> If"),(0,i.kt)("p",{parentName:"li"},"a. Change name to If_Not_Found"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},"i. condition: $SevOne_Get_Device.result.devices.length == 0 \n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"In the 'TRUE' branch of the IF, add a new building block, SevOne -> REST v2 -> Devices -> Create Device"),(0,i.kt)("p",{parentName:"li"},"a. Change name to SevOne_Create_Device"),(0,i.kt)("p",{parentName:"li"},"b. Click on the building block to open the right side panel and complete the following fields"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre"},'i. authKey: $NMSCredentials\n\nii. device:\n\n    1. name: $ForEach_CI.item.name\n\n    2. ipAddress: $ForEach_CI.item.ip_address\n\n    3. pollFrequency: 60\n\n    4. pluginInfo: {"2": {"extendedInfo": {"packetInterval":"0","packetNumber":"5","packetSize":"64"}}}\n')))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(8713).Z,width:"1490",height:"732"})),(0,i.kt)("h2",{id:"review"},"Review"),(0,i.kt)("ol",{start:20},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"To test the workflow, click on Run ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Go to SevOne (vPAS)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click on Devices -> Device Manager")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"There should be two new devices"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"IBM SevOne Automated Network Observability",src:n(832).Z,width:"1586",height:"588"})))}d.isMDXComponent=!0},8737:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Img1-ee5e510d0e0ff3ba9618fef58df14677.png"},962:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img4-f80a1986a624aeb9479c3bce55d4440b.png"},6988:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img1-461c5e91234939a869067b0468b925e5.png"},9478:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img2-bc22c054f2f73a53f483dc38a730b1ad.png"},6649:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img3-09cbc91ebcbb389fc190f4cbe5e04214.png"},8529:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img4-0c1f4b76dd7a56906cc122089b1be87b.png"},3169:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img5-cbeb7e55f80853b452252ee8f777f1bb.png"},8972:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img6-9b0d3841a3c9698a5c7cf16c83178f78.png"},8713:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img7-3ac3373a55c452e4e470c0e231e348b0.png"},832:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/img8-9e9956ba34422190900a63a76ca4206e.png"}}]);