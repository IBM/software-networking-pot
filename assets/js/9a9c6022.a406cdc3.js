"use strict";(self.webpackChunksn_pot=self.webpackChunksn_pot||[]).push([[9025],{3905:(e,t,o)=>{o.d(t,{Zo:()=>d,kt:()=>m});var a=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=c(o),u=r,m=h["".concat(l,".").concat(u)]||h[u]||p[u]||n;return o?a.createElement(m,i(i({ref:t},d),{},{components:o})):a.createElement(m,i({ref:t},d))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<n;c++)i[c]=o[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},3337:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var a=o(7462),r=(o(7294),o(3905));const n={sidebar_position:6},i="NS1 as Secondary - Redundancy/Resiliency",s={unversionedId:"NS1 PoT/NS1 as Secondary",id:"NS1 PoT/NS1 as Secondary",title:"NS1 as Secondary - Redundancy/Resiliency",description:"Overview",source:"@site/docs/NS1 PoT/6 - NS1 as Secondary.md",sourceDirName:"NS1 PoT",slug:"/NS1 PoT/NS1 as Secondary",permalink:"/software-networking-pot/docs/NS1 PoT/NS1 as Secondary",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Instana - NS1 Integration",permalink:"/software-networking-pot/docs/NS1 PoT/instana"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Story",id:"story",level:2},{value:"NS1 Configuration",id:"ns1-configuration",level:2}],d={toc:c},h="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(h,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ns1-as-secondary---redundancyresiliency"},"NS1 as Secondary - Redundancy/Resiliency"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,'This POT walkthrough will give you steps needed to setup a Primary-Secondary configuration, with  NS1 as Secondary to another DNS solution, allowing for redundancy and resiliency on the DNS layer. You can even "hide" the primary during this POT, by removing the existing NS Records at the domain registrar, allowing for a "Hidden Primary" setup, giving the customer the ability to continue configuring DNS on their Primary/Self-hosted solution, without exposing it to the public internet.'),(0,r.kt)("h2",{id:"story"},"Story"),(0,r.kt)("p",null,'During this POT, we want the customer to experience a real-world migration process, so always try to push for the customer to come prepared with a domain that is getting traffic. They will need access to the domain registrar also, during this process. This does not have to mean a full production domain but possibly an older marketing campaign domain, that still gets some traffic. This makes it easier to demonstrate the value of performance and redundancy gains against a real live domain, instead of a test/dummy domain. Also, this domain will already be delegated to another solution, which matches it to the same process the customer will have to go through for their live production domains. We will show how quick and simple it is to test this setup. This will also make NS1 more "sticky", as the customer will have to go through the steps to remove NS1 and may wish to move forward with this setup for ease-of-use. You will also want to make sure the customer sets up the correct firewall rules on their Primary solution, to allow NS1 to XFR the zone file successfully. The following NS1 IP will need to be allowed:\n192.135.223.10'),(0,r.kt)("h2",{id:"ns1-configuration"},"NS1 Configuration"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Log into ",(0,r.kt)("a",{parentName:"p",href:"https://my.nsone.net/"},"https://my.nsone.net/")," with your username and password")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to the DNS>Zones tab"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(9459).Z,width:"3024",height:"1713"})),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click the + icon on the top right side"),(0,r.kt)("p",{parentName:"li"},"a. Domain name: anydomain.com (customer's live domain here)"),(0,r.kt)("p",{parentName:"li"},'b. Make sure to check off "Managed DNS Network" and choose "Secondary Zone" under "Zone Settings"'),(0,r.kt)("p",{parentName:"li"},"c. At this stage, you must configure your primary DNS server(s) to allow AXFR queries from NS1. This can be done by finding out the public IP of the Primary XFR server. This will vary depending on the customer's setup but there are links below for most of the cloud provider XFR IP's and self-hosted guides on how to set this up, below\nLINKS TBC"),(0,r.kt)("p",{parentName:"li"},'d. Make sure "Managed DNS" is picked from the dropdown, as shown below.'),(0,r.kt)("p",{parentName:"li"},"e. TSIG can be enabled and configured, if set on the Primary already and customer wants to test this feature."),(0,r.kt)("p",{parentName:"li"},"f. Save Zone"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(9360).Z,width:"1663",height:"1530"})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},'The zone should now be showing as a "Secondary" Zone in the Zone list')),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(4705).Z,width:"1525",height:"667"})),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click into the newly added Zone"),(0,r.kt)("p",{parentName:"li"},"a. Depending on how quickly XFR takes to update and pull in the DNS config from the Primary, you may start to see some records start to populate. If not, don't worry. You may have to wait a minute or two for it to refresh. While it's refreshing, you can show off the \"ALIAS-as-Secondary\" feature, allowing customers to add an additional CNAME-@-the-Apex record. This is a great feature for customers currently doing this on the Primary but does not allow for transfer over XFR, due to RFC compliancy."),(0,r.kt)("p",{parentName:"li"},'b. To check on the current status of the Zone Transfer, you can navigate to "Zone Settings" tab.'),(0,r.kt)("p",{parentName:"li"},'c. Under "Secondary Zone Status", you will see the current status of the zone transfer. It may show "ok" if the zone has successfully updated or you may see an error. Usually these errors will relate to the firewall rules on either side not setup correctly or incorrect TSIG configuration.'),(0,r.kt)("p",{parentName:"li"},'d. You can also show how easy it is for the customer to force a refresh of the zone and also implement a "break-glass" scenario, by turning the zone to a primary. This will allow the customer to manage the zone as a "primary", allowing for changes on NS1, while maintenance is performed on the Primary.'))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(76).Z,width:"3024",height:"1716"})),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Click to the "Nameservers" tab to get a view of the NS1 nameservers to apply at the domain\'s registrar')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Once the records have all pulled down and you get the "ok" zone refresh status, you can walk the customer through changing their domain registrar\'s DNS Nameservers.'))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(5726).Z,width:"3024",height:"1716"})),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The customer's domain registrar portal will look different depending on their provider. It should look similar to something like below but only including the existing Primary solution NS's"),(0,r.kt)("p",{parentName:"li"},"a. Edit the Nameservers"),(0,r.kt)("p",{parentName:"li"},'b. Add in the additional NS1 nameservers, noted in the "Nameservers" tab. It should look something similar to the below screenshot, via GoDaddy.'))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(2306).Z,width:"2936",height:"1663"})),(0,r.kt)("ol",{start:9},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'Once added, NS1 will start to responding to any new DNS lookups where NS1 is performing better for the end client/resolver making the DNS lookup. If the customer wants to test a "Hidden Primary" setup, they can remove their existing solution\'s NS\'s from the domain registrar. This will mean the "Primary" configuration is where the changes are made but NS1 are listening as a publicly-facing "Secondary".')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},'To check if the delegation change has changed globally, you can run local "dig" commands, like below, or use a tool like diggui.com to check.')),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Customers can start to run reports, using NS1's Data Set ",(0,r.kt)("a",{parentName:"p",href:"https://https://www.ibm.com/docs/en/ns1-connect?topic=data-sets-page"},"generator"),", to run reports on queries and a number of other metrics for the newly delegated zones."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"IBM NS1",src:o(2635).Z,width:"3024",height:"1716"})),(0,r.kt)("ol",{start:12},(0,r.kt)("li",{parentName:"ol"},'Customers may also want to test how quickly a change propogates from the Primary configuration to the Secondary (NS1). You can go through this exercise with the customer by walking them changing a record at the Primary and watching how quickly it takes to change in the NS1 portal and then propogated out to the public internet, again using tools like "diggui" or local dig commands.')))}p.isMDXComponent=!0},9459:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img1-3f505b5fcf5e2a171087b7304fa21e6f.png"},9360:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img2-0d489be2a0fafb6055b84d66dac5ed9b.png"},4705:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img3-0dc0b332043a8c8f5f344c221a5d5d1a.png"},76:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img4-15429bdfbbfbb5faea1c133a0dbd4ddd.png"},5726:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img5-b277fd81296567bcca634bebfc6a3998.png"},2306:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img6-8b5ab266c13ef462204ad3a265378b1f.png"},2635:(e,t,o)=>{o.d(t,{Z:()=>a});const a=o.p+"assets/images/img7-94d0d7f72a06208e7fe480e5b8b5f9aa.png"}}]);